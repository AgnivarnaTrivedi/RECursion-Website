<% content_for :heading do %>
	RECursion
<% end %>

<div class="container2" style="min-height: 100%;">
	<div class="row">
		<div class="col s12 hide-on-med-and-up">
			<%= image_tag(User.find(@user.id).image_url, size: '150x150', class:'circle', alt: 'Picture Loading')%>
			<h4><%= @user.nickname %></h4>
			<h6><i>Name:</i> <%= @user.name %></h6>
			<h6><i>Studies at: </i><%= @user.college %></h6>
			<h6><i>Specialization:</i> <%= @user.dept %></h6>
			<h6><i>Reputation:</i> <%= @rep %></h6>
			<br>
			<h6><a href="#qfollow"><em>Questions Following</em></a></h6>
			<h6><a href="#qposted"><em>Questions Posted</em></a></h6>
			<h6><a href="#qanswered"><em>Questions Answered</em></a></h6>
		</div>
		<div class="col s12 m3 hide-on-small-and-down">
			<div class="sidenav">
				<%= image_tag(User.find(@user.id).image_url, size: '135x135', class:'circle', alt: 'Picture Loading')%>
				<h4><%= @user.nickname %></h4>
				<h6><i>Name:</i> <%= @user.name %></h6>
				<h6><i>Studies at: </i><%= @user.college %></h6>
				<h6><i>Specialization:</i> <%= @user.dept %></h6>
				<h6><i>Reputation:</i> <%= @rep %></h6>
				<% if current_user && current_user == @user && (current_user.college.blank? || current_user.dept.blank? || current_user.name.blank? ) %>
				<%= link_to 'Update', profile_update_path, class: "waves-effect waves-light btn", style: "background-color: #0097a7" %>
				<% end %>
				<br /><br />
				<h6><a href="#qfollow"><em>Questions Following</em></a></h6>
				<h6><a href="#qposted"><em>Questions Posted</em></a></h6>
				<h6><a href="#qanswered"><em>Questions Answered</em></a></h6>
			</div>
		</div>
		<div class="col s12 m9">
			<div id="qfollow" class="section scrollspy">
				<h5>Questions Following</h5><hr>
				<% @followed_question_ids.each do |q_id| %>
					<table class="highlight">
					<td>
						<%= link_to question_path(q_id) do %>
							<h6><%= Question.find(q_id).title %>
							<span style="float: right;"><small><%= Question.find(q_id).answers.count %> Answers</small></span></h6>
						<% end %>
					</td>
					</table>
				<% end %>
			</div>

			<div id="qposted" class="section scrollspy">
				<h5>Questions Posted</h5><hr>
				<% @user.questions.each do |question| %>
					<table class="highlight">
					<td>
						<%= link_to question_path(question) do %>
							<h6><%= question.title %>
							<span style="float: right;"><small><%= question.follows.count %> Followers | <%= question.answers.count %> Answers</small></span></h6>
						<% end %>
					</td>
					</table>
				<% end %>
			</div>

			<div id="qanswered" class="section scrollspy">
				<h5>Questions Answered</h5><hr>
				<% @answered_question_ids.each do |q_id| %>
					<table class="highlight">
					<td>
						<%= link_to question_path(q_id[0]) do %>
							<h6><%= Question.find(q_id[0]).title %>
							<span style="float: right;"><small><%= Answer.find(q_id[1]).upvotes.count %> Upvotes</small></span></h6>
						<% end %>
					</td>
					</table>
				<% end %>
			</div>

		</div>
	</div>
</div>
<script type="text/javascript">
	$(document).ready(function(){
		$('.scrollspy').scrollSpy();
	});
</script>